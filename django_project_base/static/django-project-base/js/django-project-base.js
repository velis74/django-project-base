(function(e){function t(t){for(var a,o,s=t[0],l=t[1],d=t[2],u=0,f=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);c&&c(t);while(f.length)f.shift()();return i.push.apply(i,d||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={app:0},i=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var c=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0440":function(e,t,n){"use strict";n("a18d")},"0e0f":function(e,t,n){},"150b":function(e,t,n){},"1d9d":function(e,t,n){},"1e55":function(e,t,n){"use strict";n("8aaf")},2505:function(e,t,n){},3051:function(e,t,n){"use strict";n("1d9d")},"306c":function(e,t,n){},"30aa":function(e,t,n){"use strict";n("a508")},3646:function(e,t,n){"use strict";n("bc54")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("54ba");var a=n("a026"),r=(n("d3b7"),n("bc3a")),i=n.n(r),o=n("d4ec"),s=n("bee2"),l=function(){function e(){Object(o["a"])(this,e)}return Object(s["a"])(e,null,[{key:"store",value:function(){return localStorage}},{key:"get",value:function(t){var n=e.store().getItem(t);return n?JSON.parse(n).__val:null}},{key:"set",value:function(t,n){null!==n&&e.store().setItem(t,JSON.stringify({__val:n}))}},{key:"delete",value:function(t){e.store().removeItem(t)}},{key:"clear",value:function(){e.store().clear()}}]),e}(),d=i.a.create({xsrfCookieName:window.csrf_token_name||"__Host-csrftoken",xsrfHeaderName:"X-CSRFToken",withCredentials:!0}),c=401;d.interceptors.request.use((function(e){return e.headers["Content-Type"]="application/json",e.headers["Current-Project"]=l.get("current-project"),e.headers["X-CSRFToken"]||("undefined"!==typeof dynamicforms&&dynamicforms.csrf_token?e.headers["X-CSRFToken"]=dynamicforms.csrf_token:window.csrf_token&&(e.headers["X-CSRFToken"]=window.csrf_token)),e}),(function(e){return Promise.reject(e)})),d.interceptors.response.use((function(e){return Promise.resolve(e)}),(function(e){var t=e&&e.response&&e.response.data&&e.response.data.detail?e.response.data.detail:"",n=e&&e.response&&e.response.status?parseInt(e.response.status,10):null,a=n===c,r=e.config&&!0===e.config.hideErrorNotice;return a&&l.clear(),r||showGeneralErrorNotification(t),Promise.reject(e)}));var u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n(e.component+"Modal",{tag:"component"})],1)},f=[],p=(n("3598"),n("5b3a"),{UI:"Bootstrap",getObjectFromPath:function(e){if(e)try{return e.split(".").reduce((function(e,t){return e[t]||{}}),window)}catch(t){console.error(t)}}});window.dynamicforms=p;var m=p,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:"modal fade "+e.className,attrs:{id:e.uuid,tabindex:"-1",role:"dialog","aria-hidden":"true"}},[n("div",{class:"modal-dialog "+e.sizeClass,attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{class:"modal-header "+e.headerClasses},[n("h5",{staticClass:"modal-title"},[e._v(e._s(e.title))]),e._m(0)]),n("transition",{attrs:{name:"flip",mode:"out-in"}},[e.isComponent?n("div",{key:e.uniqId,staticClass:"modal-body"},[n(e.body.component,e._b({tag:"div"},"div",e.body,!1))],1):n("div",{key:e.uniqId,staticClass:"modal-body",domProps:{innerHTML:e._s(e.body)}})]),n("div",{staticClass:"modal-footer"},e._l(e.buttons,(function(t){return n("button",e._b({key:t.uuid,class:t.classes,attrs:{id:t.element_id||t.uuid,type:"button"},on:{click:function(n){return n.stopPropagation(),e.buttonClick(n,t,e.callback)}}},"button",t.arias,!1),[e._v(" "+e._s(t.label)+" ")])})),0)],1)])])},g=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã—")])])}],v=(n("cb35"),n("7e1b"),n("fd9b"),n("4ebd"),n("0a4c"),n("87b2"),n("3704"),n("b378"),n("e3be")),b=(n("c34a"),n("b9ee"),n("c09f"),n("bba9")),_=n.n(b),y=n("365e"),w=n.n(y),x=2083,C=_.a.create({xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken",withCredentials:!1}),k=0;C.interceptors.request.use((function(e){var t=void 0===e.showProgress||e.showProgress;if(!e.url.includes("/dynamicforms/progress")&&t){var n=m.dialog.addRequest(++k);e.sequence=n.sequence,e.headers["x-df-timestamp"]=e.headers["x-df-timestamp"]||n.timestamp}if("get"===w.a.toLower(e.method)&&w.a.size(e.url)>x&&w.a.includes(w.a.map(w.a.keys(e.headers),(function(e){return w.a.toLower(e)})),"x-viewmode")){var a="Your request exceeds maximum length";throw m.dialog.message("error",a),new _.a.Cancel(a)}return e})),C.interceptors.response.use((function(e){return m.dialog.removeRequest(e.config.sequence),e}),(function(e){return m.dialog.removeRequest(e.config.sequence),Promise.reject(e)}));var D=C,j=n("447f"),O=new j["default"],F=O,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{attrs:{id:e.uuid}},[e._t("form-error",(function(){return[e.errorText?n("div",{staticClass:"alert alert-danger"},[n("small",{staticClass:"text-danger",attrs:{id:"form-"+e.uuid+"-err"}},[e._v(e._s(e.errorText))])]):e._e()]})),e._l(e.rows,(function(t,a){return n("DFFormRow",{key:a,attrs:{columns:t,data:e.record,errors:e.errors}})}))],2)},L=[],E={name:"formFieldChangeMixin",props:{rows:{},uuid:{},record:{default:null}},data:function(){return{}},emits:["fieldValueChanged"],computed:{recordFields:function(){var e=this;return Object.keys(this.record).reduce((function(t,n){return t[n]=e.record[n],t}),{})}},beforeDestroy:function(){},mounted:function(){},watch:{recordFields:{handler:function(e,t){var n=this;Object.keys(this.record).map((function(a){return t[a]!==e[a]&&n.$emit("".concat(a,"-changed"),{formID:n.uuid,newRec:e,oldRec:t,changedField:a}),null}))},deep:!0}}},I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isHiddenSingle?n("DFFormColumn",{attrs:{def:e.writableColumns[0],data:e.data,errors:e.errors}}):n("div",{staticClass:"row align-items-end"},e._l(e.writableColumns,(function(t,a){return n("DFFormColumn",{key:a,attrs:{def:t,data:e.data,errors:e.errors}})})),1)},T=[],S=(n("e9a8"),Object.freeze({SUPPRESS:1,HIDDEN:5,INVISIBLE:8,FULL:10})),q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isGroup?n("div",{class:e.cssClasses},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header"},[e._v(" "+e._s(e.def.title)+" ")]),n("div",{staticClass:"card-body"},[n(e.def.field.render_params.form,{tag:"component",attrs:{def:e.def.field,data:e.data,errors:e.errors,"show-label-or-help-text":e.showLabelOrHelpText}})],1),e.def.footer?n("div",{staticClass:"card-footer"},[e._v(" "+e._s(e.def.footer)+" ")]):e._e()])]):e.isHidden?n(e.def.field.render_params.form,{tag:"component",attrs:{def:e.def.field,data:e.data,errors:e.errors,"show-label-or-help-text":e.showLabelOrHelpText}}):n("div",{class:e.cssClasses+e.columnClasses},[n(e.def.field.render_params.form,{tag:"component",attrs:{def:e.def.field,data:e.data,errors:e.errors,"show-label-or-help-text":e.showLabelOrHelpText},on:{onValueConfirmed:e.onValueConfirmed}})],1)},N=[],B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DFWidgetBase",{key:e.fieldKey,attrs:{def:e.def,data:e.data,errors:e.errors,"show-label-or-help-text":e.showLabelOrHelpText}},[e.indeterminate?n("input",{directives:[{name:"indeterminate",rawName:"v-indeterminate",value:!0,expression:"true"}],class:e.def.render_params.field_class,attrs:{slot:"input",id:e.def.uuid,type:"checkbox",name:e.def.name,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.name+"-help":null,readonly:e.readonly,disabled:!0===e.def.read_only},domProps:{checked:!1},on:{change:e.change},slot:"input"}):e._e(),e.indeterminate?e._e():n("input",{directives:[{name:"indeterminate",rawName:"v-indeterminate",value:!1,expression:"false"}],class:e.def.render_params.field_class,attrs:{slot:"input",id:e.def.uuid,type:"checkbox",name:e.def.name,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.name+"-help":null,readonly:e.readonly,disabled:!0===e.def.read_only},domProps:{checked:e.internalValue},on:{change:e.change},slot:"input"})])},M=[],H=(n("2838"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isHidden?n("input",{attrs:{type:"hidden",name:e.def.name},domProps:{value:e.data[e.def.name]}}):n("div",{class:e.def.render_params.container_class,attrs:{id:"container-"+e.def.uuid}},[!1===e.labelAfterElement&&e.showLabelOrHelpText?n("DFWidgetBaseLabel",{attrs:{data:e.data,def:e.def}}):e._e(),e._t("input"),e.labelAfterElement&&e.showLabelOrHelpText?n("DFWidgetBaseLabel",{attrs:{data:e.data,def:e.def}}):e._e(),e._t("help",(function(){return[e.def.help_text&&e.showLabelOrHelpText?n("small",{staticClass:"form-text text-muted",attrs:{id:e.def.name+"-help"}},[e._v(e._s(e.def.help_text))]):e._e()]})),e._t("error",(function(){return[e.getErrorText?n("small",{staticClass:"invalid-feedback d-block",attrs:{id:e.def.name+"-err"}},[e._v(e._s(e.getErrorText))]):e._e()]}))],2)}),A=[],V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.def.label?n("label",{class:e.def.render_params.label_class,attrs:{id:"label-"+e.def.uuid,for:e.def.name}},[e._v(" "+e._s(e.def.label)+" ")]):e._e()},$=[],R={name:"DFWidgetBaseLabel",props:{def:{type:Object,required:!0},data:{type:Object,required:!1,default:function(){}}}},U=R,W=n("2877"),z=Object(W["a"])(U,V,$,!1,null,"0549e1ce",null),K=z.exports,G={name:"DFWidgetBase",components:{DFWidgetBaseLabel:K},props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0}},computed:{isHidden:function(){return this.def.visibility.form===S.HIDDEN},labelAfterElement:function(){return this.def.render_params.label_after_element},getErrorText:function(){try{if(this.errors&&this.errors[this.def.name])return this.errors[this.def.name]}catch(e){}return""}}},J=G,X=Object(W["a"])(J,H,A,!1,null,"09f67ae8",null),Q=X.exports,Y={name:"DFWidgetCheckbox",components:{DFWidgetBase:Q},directives:{indeterminate:function(e,t){e.indeterminate=Boolean(t.value)}},props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0}},data:function(){return{indeterminate:!1,readonly:!0===this.def.read_only,internalValue:!1,fieldKey:Math.round(1e3*Math.random())}},computed:{value:{get:function(){return this.data[this.def.name]},set:function(e){this.data[this.def.name]=e,this.$emit("onValueConfirmed",!0)}}},mounted:function(){this.indeterminate=this.def.allow_null&&(void 0===this.value||null===this.value),this.value&&(this.internalValue=!0),void 0!==this.value&&null!==this.value||(this.internalValue=null)},methods:{change:function(e){var t=w.a.clone(this.internalValue),n=e.currentTarget.checked;this.def.allow_null?(!0===t?(this.indeterminate=!0,this.internalValue=null):(null===t||void 0===t)&&this.indeterminate&&n?(this.indeterminate=!1,this.internalValue=!1):!1===t&&!0===n&&(this.internalValue=!0,this.indeterminate=!1),this.fieldKey=Math.round(1e3*Math.random()),this.value=w.a.clone(this.internalValue)):this.value=w.a.clone(n)}}},Z=Y,ee=(n("3051"),Object(W["a"])(Z,B,M,!1,null,null,null)),te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DFWidgetBase",{attrs:{def:e.def,data:e.data,errors:e.errors,"show-label-or-help-text":e.showLabelOrHelpText}},[n("ckeditor",{attrs:{slot:"input",editor:e.editor,config:e.editorConfig},slot:"input",model:{value:e.editorData,callback:function(t){e.editorData=t},expression:"editorData"}})],1)},ae=[],re=n("35cb"),ie=n.n(re),oe=n("4b2a"),se=n.n(oe),le={name:"DFWidgetCKEditor",components:{DFWidgetBase:Q,ckeditor:se.a.component},props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0}},data:function(){return{editor:ie.a,editorData:"<p>Type some text...</p>",editorConfig:{}}}},de=le,ce=Object(W["a"])(de,ne,ae,!1,null,"0305d162",null),ue=ce.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DFWidgetBase",{attrs:{def:e.def,data:e.data,errors:e.errors,"show-label-or-help-text":e.showLabelOrHelpText}},[n("div",{key:e.def.uuid,attrs:{slot:"input",id:e.def.uuid},slot:"input"},[n("div",{staticClass:"input-group"},[n("input",{key:e.fileInputKey,ref:"file",attrs:{type:"file",readonly:!0===e.def.read_only,disabled:!0===e.def.read_only,name:e.def.name},on:{change:e.selectFile}})]),n("div",[e.currentFile?n("div",{staticClass:"progress",staticStyle:{"margin-top":"0.3em"}},[n("div",{staticClass:"progress-bar progress-bar-info progress-bar-striped",style:{width:e.progress+"%"},attrs:{role:"progressbar","aria-valuenow":e.progress,"aria-valuemin":"0","aria-valuemax":"100"}},[e._v(" "+e._s(e.progress)+"% ")])]):e._e(),n("div",[e.showFileOnServer?n("div",[e._v(" "+e._s(e.getFileName(e.currentFile?e.currentFile.name:e.data[e.def.name]))+" "),n("button",{staticClass:"close",staticStyle:{color:"red"},attrs:{type:"button","aria-label":"Close"},on:{click:e.removeFile}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã—")])])]):e._e()])])])])},pe=[],me=(n("46ba"),{getFileNameFromPath:function(e){return e?e.replace(/^.*[\\/]/,""):e}}),he=me,ge={name:"DFWidgetFile",components:{DFWidgetBase:Q},props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0}},data:function(){return{currentFile:void 0,progress:0,showFileOnServer:!1,fileInputKey:Math.round(1e3*Math.random())}},mounted:function(){this.showFileOnServer=!!w.a.clone(this.data[this.def.name])},methods:{getFileName:function(e){return he.getFileNameFromPath(e)},selectFile:function(){this.upload()},removeFile:function(){this.data[this.def.name]=null,this.progress=0,this.fileInputKey=Math.round(1e3*Math.random()),this.showFileOnServer=!1,this.currentFile=void 0},upload:function(){var e=this;this.progress=0,this.currentFile=this.$refs.file.files.item(0);var t=new FormData;t.append("file",this.currentFile,"".concat(this.currentFile.name)),this.showFileOnServer=!0,this.progress=0,this.progress=45,this.progress=60,D.post("/dynamicforms/preupload-file/",t,{showProgress:!1}).then((function(t){e.data[e.def.name]=t.data.identifier,e.progress=100})).catch((function(t){e.progress=0,e.showFileOnServer=!1,e.currentFile=void 0,e.fileInputKey=Math.round(1e3*Math.random()),console.error(t)}))}}},ve=ge,be=Object(W["a"])(ve,fe,pe,!1,null,null,null),_e=be.exports,ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DFWidgetBase",{attrs:{def:e.def,data:e.data,errors:e.errors,"show-label-or-help-text":e.showLabelOrHelpText}},["checkbox"!==e.inputType||e.isTextArea?"radio"!==e.inputType||e.isTextArea?e.isTextArea?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:e.def.render_params.field_class,attrs:{slot:"input",id:e.def.uuid,name:e.def.name,placeholder:e.def.placeholder,maxlength:e.maxLength,rows:"4",readonly:!0===e.def.read_only,disabled:!0===e.def.read_only},domProps:{value:e.value},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onValueConfirmed(!0)},input:[function(t){t.target.composing||(e.value=t.target.value)},function(t){return e.onValueConfirmed(!1)}],change:function(t){return e.onValueConfirmed(!1)}},slot:"input"}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:e.def.render_params.field_class,attrs:{slot:"input",id:e.def.uuid,name:e.def.name,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.name+"-help":null,placeholder:e.def.placeholder,pattern:e.def.render_params.pattern,min:e.def.render_params.min,max:e.def.render_params.max,step:e.def.render_params.step,minlength:e.def.render_params.min_length,maxlength:e.maxLength,size:e.def.render_params.size,readonly:!0===e.def.read_only,disabled:!0===e.def.read_only,type:e.inputType},domProps:{value:e.value},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onValueConfirmed(!0)},input:[function(t){t.target.composing||(e.value=t.target.value)},function(t){return e.onValueConfirmed(!1)}],change:function(t){return e.onValueConfirmed(!1)}},slot:"input"}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:e.def.render_params.field_class,attrs:{slot:"input",id:e.def.uuid,name:e.def.name,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.name+"-help":null,placeholder:e.def.placeholder,pattern:e.def.render_params.pattern,min:e.def.render_params.min,max:e.def.render_params.max,step:e.def.render_params.step,minlength:e.def.render_params.min_length,maxlength:e.maxLength,size:e.def.render_params.size,readonly:!0===e.def.read_only,disabled:!0===e.def.read_only,type:"radio"},domProps:{checked:e._q(e.value,null)},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onValueConfirmed(!0)},input:function(t){return e.onValueConfirmed(!1)},change:[function(t){e.value=null},function(t){return e.onValueConfirmed(!1)}]},slot:"input"}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:e.def.render_params.field_class,attrs:{slot:"input",id:e.def.uuid,name:e.def.name,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.name+"-help":null,placeholder:e.def.placeholder,pattern:e.def.render_params.pattern,min:e.def.render_params.min,max:e.def.render_params.max,step:e.def.render_params.step,minlength:e.def.render_params.min_length,maxlength:e.maxLength,size:e.def.render_params.size,readonly:!0===e.def.read_only,disabled:!0===e.def.read_only,type:"checkbox"},domProps:{checked:Array.isArray(e.value)?e._i(e.value,null)>-1:e.value},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onValueConfirmed(!0)},input:function(t){return e.onValueConfirmed(!1)},change:[function(t){var n=e.value,a=t.target,r=!!a.checked;if(Array.isArray(n)){var i=null,o=e._i(n,i);a.checked?o<0&&(e.value=n.concat([i])):o>-1&&(e.value=n.slice(0,o).concat(n.slice(o+1)))}else e.value=r},function(t){return e.onValueConfirmed(!1)}]},slot:"input"})])},we=[],xe={name:"DFWidgetInput",components:{DFWidgetBase:Q},props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0}},computed:{inputType:function(){return this.def.render_params.input_type},maxLength:function(){return this.def.render_params.max_length||1<<24},isTextArea:function(){return!0===this.def.textarea},value:{get:function(){return this.data[this.def.name]},set:function(e){this.data[this.def.name]=e}}},methods:{onValueConfirmed:function(e){this.$emit("onValueConfirmed",e)}}},Ce=xe,ke=Object(W["a"])(Ce,ye,we,!1,null,null,null),De=ke.exports,je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DFWidgetBase",{attrs:{def:e.def,data:e.data,errors:e.errors,"show-label-or-help-text":e.showLabelOrHelpText}},[n("div",{staticClass:"input-group",attrs:{slot:"input"},slot:"input"},["checkbox"===e.passwordFieldType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:e.def.render_params.field_class,attrs:{id:e.def.uuid,name:e.def.name,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.name+"-help":null,placeholder:e.def.placeholder,pattern:e.def.render_params.pattern,type:"checkbox"},domProps:{value:e.value,checked:Array.isArray(e.value)?e._i(e.value,e.value)>-1:e.value},on:{change:function(t){var n=e.value,a=t.target,r=!!a.checked;if(Array.isArray(n)){var i=e.value,o=e._i(n,i);a.checked?o<0&&(e.value=n.concat([i])):o>-1&&(e.value=n.slice(0,o).concat(n.slice(o+1)))}else e.value=r}}}):"radio"===e.passwordFieldType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:e.def.render_params.field_class,attrs:{id:e.def.uuid,name:e.def.name,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.name+"-help":null,placeholder:e.def.placeholder,pattern:e.def.render_params.pattern,type:"radio"},domProps:{value:e.value,checked:e._q(e.value,e.value)},on:{change:function(t){e.value=e.value}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:e.def.render_params.field_class,attrs:{id:e.def.uuid,name:e.def.name,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.name+"-help":null,placeholder:e.def.placeholder,pattern:e.def.render_params.pattern,type:e.passwordFieldType},domProps:{value:e.value,value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),n("span",{staticClass:"input-group-text",attrs:{id:"pwf-"+e.def.uuid},on:{click:function(t){return t.stopPropagation(),e.toggle_password.apply(null,arguments)}}},[n("IonIcon",{staticClass:"pass-icon",attrs:{name:e.isPassword?"eye-outline":"eye-off-outline"}})],1)])])},Oe=[],Fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loaded_svg?n("div",{key:e.loaded_svg,domProps:{innerHTML:e._s(e.loaded_svg)}}):e._e()},Pe=[],Le={name:"IonIcon",props:{name:{type:String,required:!1,default:null}},data:function(){return{loaded_svg:""}},watch:{name:function(){this.loaded_svg="",this.loadSVG()}},mounted:function(){this.loadSVG()},methods:{loadSVG:function(){var e=this,t=this.name;if(window.cache_ionicon||(window.cache_ionicon={}),t)if(window.cache_ionicon[t]){if("function"===typeof window.cache_ionicon[t].then)return window.cache_ionicon[t].then((function(t){e.loaded_svg=t.data.replace(/<title>.*<\/title>/i,"")})),void(this.loaded_svg="&hellip;");this.loaded_svg=window.cache_ionicon[t]}else this.loaded_svg="&hellip;",window.cache_ionicon[t]=D.get("https://unpkg.com/ionicons@5.5.1/dist/svg/".concat(t,".svg")),window.cache_ionicon[t].then((function(n){e.loaded_svg=window.cache_ionicon[t]=n.data.replace(/<title>.*<\/title>/i,"")}));else Object(y["noop"])()}}},Ee=Le,Ie=(n("9982"),Object(W["a"])(Ee,Fe,Pe,!1,null,null,null)),Te=Ie.exports,Se={name:"DFWidgetPassword",components:{IonIcon:Te,DFWidgetBase:Q},props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0}},data:function(){return{passwordFieldType:"password",isPassword:!0}},computed:{value:{get:function(){return this.data[this.def.name]},set:function(e){this.data[this.def.name]=e}}},methods:{toggle_password:function(){this.isPassword=!this.isPassword,this.passwordFieldType="password"===this.passwordFieldType?"text":"password"}}},qe=Se,Ne=(n("86fa"),Object(W["a"])(qe,je,Oe,!1,null,"087e2658",null)),Be=Ne.exports,Me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DFWidgetBase",{attrs:{def:e.def,data:e.data,errors:e.errors,"show-label-or-help-text":e.showLabelOrHelpText}},[n("div",{key:e.def.uuid,staticClass:"df-select-class",attrs:{slot:"input",id:e.def.uuid,name:e.def.name,"data-value":e.selenium?e.result:null,"data-options":e.selenium?e.options_json:null},slot:"input"},[n("AMultiselect",{attrs:{options:e.options,"close-on-select":!0,"clear-on-select":!0,"hide-selected":!1,"preserve-search":!0,"preselect-first":!1,label:"text","track-by":"id",disabled:e.disabled,multiple:e.multiple,taggable:e.taggable,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.field_name+"-help":null,placeholder:e.def.placeholder},on:{select:e.onSelect,input:e.onInput,tag:e.onTag},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)])},He=[],Ae=(n("7cb3"),n("124a"),n("9ae7")),Ve=n.n(Ae),$e={name:"DFWidgetSelect",components:{DFWidgetBase:Q,AMultiselect:Ve.a},props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0}},emits:["update:modelValue"],data:function(){return{selected:null,disabled:!1,required:!1,selenium:!0}},computed:{options:function(){return this.def.choices},options_json:function(){return JSON.stringify(this.options)},multiple:function(){return this.def.render_params.multiple},taggable:function(){return this.def.render_params.allow_tags},result:{get:function(){return this.selected?this.multiple?this.selected.map((function(e){return e.id})):this.selected.id:""},set:function(e){if(null!=e)if(this.multiple){var t=e.constructor===Array?e:e.split(",");this.selected=this.options.filter((function(e){return t.includes("".concat(e.id))}))}else this.selected=this.options.find((function(t){return String(t.id)===String(e)}));else this.selected=null}}},watch:{selected:function(){this.data[this.def.name]=this.result}},mounted:function(){var e=this;this.multiple||this.def.allow_null||this.data[this.def.name]||!this.options?this.result=this.data[this.def.name]:this.result=this.options[0].id,this.selenium&&(window["setSelectValue ".concat(this.def.uuid)]=function(t){e.result=t})},destroyed:function(){this.selenium&&delete window["setSelectValue ".concat(this.def.uuid)]},methods:{onSelect:function(e){this.data[this.def.name]=this.result,this.$emit("itemSelected",e),this.$emit("onValueConfirmed",!0)},onInput:function(e){null===e&&(this.data[this.def.name]=this.result,this.$emit("itemSelected",e))},onTag:function(e){var t={id:e,text:e};this.def.choices.push(t),this.multiple?this.selected.push(t):this.selected=t}}},Re=$e,Ue=(n("fc6c"),Object(W["a"])(Re,Me,He,!1,null,"67b9e614",null)),We=Ue.exports,ze={name:"DFFormColumn",components:{DFWidgetInput:De,DFWidgetPassword:Be,DFWidgetCKEditor:ue,DFWidgetSelect:We,DFWidgetCheckbox:te,DFWidgetFile:_e},props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0},cssClasses:{type:String,default:"col"}},computed:{isGroup:function(){return"group"===this.def.type},isHidden:function(){return this.def.field.visibility.form===S.HIDDEN},columnClasses:function(){var e=this.def.width_classes;return e?" ".concat(e):""}},methods:{onValueConfirmed:function(e){this.$emit("onValueConfirmed",e)}}},Ke=ze,Ge=(n("c72c"),Object(W["a"])(Ke,q,N,!1,null,null,null)),Je=Ge.exports,Xe={name:"DFFormRow",components:{DFFormColumn:Je},props:{columns:{type:Array,required:!0},data:{type:Object,required:!0},errors:{type:Object,default:function(){}}},computed:{writableColumns:function(){return this.columns},isHiddenSingle:function(){return 1===this.writableColumns.length&&this.writableColumns[0].field.visibility.form===S.HIDDEN}}},Qe=Xe,Ye=Object(W["a"])(Qe,I,T,!1,null,"a3396d8a",null),Ze=Ye.exports,et={name:"DFFormLayout",components:{DFFormRow:Ze},mixins:[E],props:{rows:{type:Array,required:!0},uuid:{type:String,required:!0},record:{type:Object,default:null}},data:function(){return{errors:{}}},computed:{errorText:function(){var e="non_field_errors";try{if(this.errors&&this.errors[e])return this.errors[e]}catch(t){}return""}},mounted:function(){var e=this;F.$on("formEvents_".concat(this.uuid),(function(t){"submitErrors"===t.type&&(e.errors=t.data)}))},beforeDestroy:function(){F.$off("formEvents_".concat(this.uuid))}},tt=et,nt=Object(W["a"])(tt,P,L,!1,null,null,null),at=nt.exports,rt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?n("div",[e.progress?n("div",[n("h3",[e._v(e._s(e.label))]),n("div",{staticClass:"progress progress-striped progress-bar-animated"},[n("div",{staticClass:"progress-bar",style:"width: "+e.progress+"%",attrs:{role:"progressbar","aria-valuemax":"100","aria-valuemin":"0","aria-valuenow":"progress"}},[e._v(" "+e._s(e.progress)+"% ")])])]):n("div",{staticClass:"lds-ellipsis"},[n("div"),n("div"),n("div"),n("div")])]):e._e()},it=[],ot={name:"DFLoadingIndicator",props:{loading:{type:Boolean,required:!0},label:{type:String,required:!1,default:null},progress:{type:Number,required:!1,default:null}}},st=ot,lt=(n("3646"),Object(W["a"])(st,rt,it,!1,null,"d0401872",null)),dt=lt.exports,ct={name:"ModalHandler",components:{DFFormLayout:at,DFLoadingIndicator:dt},data:function(){return{dialogs:[],initialEventAssignDone:!1,uniqIdCounter:0,inFlightRequests:{}}},computed:{className:function(){return"df-modal-handler"},bootstrapDialog:function(){return".df-modal-handler"},currentDialog:function(){var e=this.dialogs.length?this.dialogs[this.dialogs.length-1]:null;return e&&(e.uniqId=e.uniqId||this.uniqIdCounter++),e},sizeClass:function(){var e=this.currentDialog;return e?e.large||["large","lg","modal-lg"].includes(e.size)?"modal-lg":e.small||["small","sm","modal-sm"].includes(e.size)?"modal-sm":"":"modal-sm"},headerClasses:function(){var e=this.currentDialog;return e&&e.header_classes||""},title:function(){return this.currentDialog?this.currentDialog.title:"No dialogs to show!"},body:function(){return this.currentDialog?this.currentDialog.body:"No dialogs have been invoked"},callback:function(){return this.currentDialog?this.currentDialog.callback:null},uniqId:function(){return this.currentDialog?this.currentDialog.uniqId:null},isComponent:function(){return Boolean(this.currentDialog&&this.currentDialog.body&&this.currentDialog.body.component)},uuid:function(){return this.currentDialog&&this.currentDialog.uuid?"dialog-".concat(this.currentDialog.uuid):"df-modal-handler"},isShowingProgress:function(){return this.currentDialog&&!0===this.currentDialog.isProgress},buttons:function(){var e=this,t=this.currentDialog?this.currentDialog.buttons:null,n=this.currentDialog&&t?t:[{close:"default"}];return n.map((function(t){"default"===t.close?t={label:e.gettext("Close"),classes:"btn btn-secondary",data_return:"close"}:"default"===t.yes?t={label:e.gettext("Yes"),classes:"btn btn-primary",data_return:"yes"}:"default"===t.no&&(t={label:e.gettext("No"),classes:"btn btn-secondary",data_return:"no"}),t.arias=t.arias||{};var n=(t.classes||"").split(" ");return-1===n.indexOf("btn")&&n.push("btn"),t.classes=n.join(" "),t}))}},created:function(){var e=this;m.dialog||(m.dialog=this,window.setInterval((function(){e.progressDialogCheck()}),250))},methods:{show:function(){var e=this;this.initialEventAssignDone||(this.initialEventAssignDone=!0,v(this.bootstrapDialog).on("hide.bs.modal",(function(t){var n=null;e.dialogs.length&&(n=e.dialogs.pop().callback),e.dialogs.length&&t.preventDefault(),n&&!0!==n.df_called&&n(null)}))),v(this.bootstrapDialog).modal("show")},hide:function(){v(this.bootstrapDialog).modal("hide")},gettext:function(e){return e},buttonClick:function(e,t,n){F.$emit("tableActionExecuted_".concat(this.currentDialog.tableUuid),{action:t,data:this.currentDialog.body.record,modal:this,event:e}),n&&(n(t.data_return),n.df_called=!0)},message:function(e,t,n){this.dialogs.push({title:e,body:t,buttons:[{close:"default"}],callback:n}),this.show()},yesNo:function(e,t,n){this.dialogs.push({title:e,body:t,buttons:[{yes:"default"},{no:"default"}],callback:n}),this.show()},loading:function(){return Object.keys(this.inFlightRequests).length},oldestInFlight:function(){var e=this.inFlightRequests,t=Object.keys(e);return 0===t.length?{requestId:null,timestamp:null,age:null}:{requestId:t[0],timestamp:e[t[0]],age:(new Date).getTime()-e[t[0]]}},progressDialogCheck:function(){var e=this;this.oldestInFlight().age>=250&&!this.isShowingProgress?this.showProgress():this.oldestInFlight().age>=250&&this.isShowingProgress?D.get("/dynamicforms/progress/",{headers:{"x-df-timestamp":this.oldestInFlight().timestamp}}).then((function(t){e.isShowingProgress&&(e.currentDialog.body.progress=Number(t.data.value),e.currentDialog.body.label=t.data.comment)})).catch((function(e){console.error(e)})):0===this.loading()&&this.isShowingProgress&&this.hide()},showProgress:function(){console.log("Showing progress: We have ".concat(this.loading()," active requests to server oldest is ")+"".concat(this.oldestInFlight().age,"ms old with timestamp ").concat(this.oldestInFlight().timestamp,"."));var e="Performing operation";this.dialogs.push({title:e,body:{component:"DFLoadingIndicator",loading:!0,label:null,progress:null,data:!0},buttons:[],callback:null,isProgress:!0}),this.show()},addRequest:function(e){return this.inFlightRequests[e]=(new Date).getTime(),{sequence:e,timestamp:this.inFlightRequests[e]}},removeRequest:function(e){e&&(delete this.inFlightRequests[e],this.progressDialogCheck())},showComponent:function(e,t,n){var a=e.data,r=a.dialog.actions;this.dialogs.push({uuid:a.uuid,title:a.titles[t||"new"],body:{uuid:a.uuid,rows:a.dialog.rows,record:a.record,component:a.dialog.component_name},buttons:Object.keys(r).reduce((function(e,t){return r[t].data_return={dialog_id:a.uuid,button:r[t]},e.push(r[t]),e}),[]),callback:null,size:a.dialog.size,header_classes:a.dialog.header_classes,tableUuid:n}),this.show()},fromURL:function(e,t,n){var a=this;D.get(e,{headers:{"x-viewmode":"FORM"}}).then((function(e){F.$emit("showingRESTForm",{tableUUID:n,formUUID:e.data.uuid}),a.showComponent({component:"DFFormLayout",data:e.data},t,n)})).catch((function(e){console.error(e)}))}}},ut=ct,ft=Object(W["a"])(ut,h,g,!1,null,"1b59a0c3",null),pt=ft.exports,mt={name:"ModalHandler",components:{BootstrapModal:pt},computed:{component:function(){return m.UI}}},ht=mt,gt=Object(W["a"])(ht,u,f,!1,null,"d4d82d52",null),vt=gt.exports,bt=n("ee98"),_t=n.n(bt),yt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.currentBreadcrumbsLocation.length>0?n("div",{staticClass:"nav-item breadcrumbs-component"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("nav",{attrs:{"aria-label":"breadcrumb"}},[n("ol",{staticClass:"breadcrumb"},e._l(e.currentBreadcrumbsLocation,(function(t,a){return n("li",{key:a,staticClass:"breadcrumb-item"},[n("a",{attrs:{href:t.url}},[e._v(e._s(t.breadcrumb))])])})),0)])])])]):e._e()},wt=[],xt=(n("4de4"),n("ac1f"),n("1276"),n("498a"),n("d81d"),n("a15b"),n("5319"),n("2ef0")),Ct=n.n(xt),kt={name:"breadcrumbs",data:function(){return{}},created:function(){},mounted:function(){},computed:{currentBreadcrumbsLocation:function(){var e=window.location.pathname,t=Ct.a.filter(Ct.a.trim(e,"/").split("/"),(function(e){return e}));return Ct.a.map(t,(function(e){var n=Ct.a.indexOf(t,e),a=Ct.a.take(t,n+1);return{url:"/".concat(Ct.a.join(a,"/")),breadcrumb:Ct.a.startCase(Ct.a.replace(Ct.a.replace(e,".html","")," ",""))}}))}},methods:{}},Dt=kt,jt=(n("0440"),Object(W["a"])(Dt,yt,wt,!1,null,"4188d9f7",null)),Ot=jt.exports,Ft=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"nav-item login-container login-component"},[n("div",[n("form",{on:{submit:function(e){e.preventDefault()}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.loginModel["username"],expression:"loginModel['username']"}],attrs:{type:"text",placeholder:"Username",name:"username"},domProps:{value:e.loginModel["username"]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.focusPassword.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.loginModel,"username",t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.loginModel["password"],expression:"loginModel['password']"}],attrs:{type:"password",placeholder:"Password",name:"psw"},domProps:{value:e.loginModel["password"]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.makeLogin.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.loginModel,"password",t.target.value)}}}),n("div",{staticClass:"btn-group dropleft",staticStyle:{display:"inline"}},[e.socialAuth.length?n("button",{staticClass:"btn btn-sm dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}}):e._e(),n("button",{staticClass:"btn btn-sm",attrs:{type:"button"},on:{click:e.makeLogin}},[e._v(" "+e._s(e.gettext("Login"))+" ")]),e.socialAuth.length?n("div",{staticClass:"dropdown-menu"},e._l(e.socialAuth,(function(t,a){return n("a",{key:a,staticClass:"dropdown-item",attrs:{href:t.url}},[e._v(e._s(t.title))])})),0):e._e()])])]),n("notifications",{attrs:{position:"top center"}})],1)},Pt=[],Lt=function(e,t){return new CustomEvent(e,{detail:t})},Et=(new CustomEvent("login",{}),new CustomEvent("logout",{})),It=new CustomEvent("project-selected",{}),Tt=new CustomEvent("maintenance-notification-acknowledged",{}),St=function(){function e(){Object(o["a"])(this,e)}return Object(s["a"])(e,null,[{key:"login",value:function(t,n){l.clear(),d.post("/account/login/",{login:t,password:n}).then((function(){e.checkLogin(!0,(function(){return window.location.href="/"}))}))}},{key:"logout",value:function(){d.post("/account/logout/").finally((function(){l.clear(),document.dispatchEvent(Et),window.location.href="/"}))}},{key:"checkLogin",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return d.get("/account/profile/current",{hideErrorNotice:!e}).then((function(e){l.set("current-user",e.data),document.dispatchEvent(Lt("login",e.data)),t&&t()})).catch((function(){l.clear()}))}}]),e}(),qt={name:"login",data:function(){return{loginModel:{username:null,password:null},socialAuth:[]}},mounted:function(){St.checkLogin(!1,this.checkLoginSuccessCallback)},methods:{checkLoginSuccessCallback:function(){var e=this;l.get("current-user")||d.get("/account/social-auth-providers/").then((function(t){e.socialAuth=t.data}))},makeLogin:function(){St.login(this.loginModel.username,this.loginModel.password)},focusPassword:function(){document.getElementsByName("psw")[0].focus()}}},Nt=qt,Bt=(n("ba13"),Object(W["a"])(Nt,Ft,Pt,!1,null,"6419fad0",null)),Mt=Bt.exports,Ht=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"modal"}},[n("div",{staticClass:"modal-mask"},[n("div",{staticClass:"modal-wrapper"},[n("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[e._t("modal-title",(function(){return[n("h5",{staticClass:"modal-title"},[e._v("Modal title")])]})),e._t("header",(function(){return[n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã—")])])]}))],2),n("div",{staticClass:"modal-body"},[e._t("body",(function(){return[e._v(" default body ")]}))],2),n("div",{staticClass:"modal-footer"},[e._t("footer",(function(){return[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"}},[e._v(e._s(e.gettext("Close"))+" ")]),n("button",{staticClass:"btn btn-primary",attrs:{type:"button"}},[e._v(e._s(e.gettext("Save changes")))])]}))],2)])])])])])},At=[],Vt={name:"modalwindow"},$t=Vt,Rt=(n("1e55"),Object(W["a"])($t,Ht,At,!1,null,"661d63d1",null)),Ut=Rt.exports,Wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"nav-item project-list-dropdown projectlist-component"},[n("div",{staticClass:"collapse navbar-collapse"},[n("ul",{staticClass:"navbar-nav"},[n("li",{staticClass:"nav-item dropdown"},[n("i",{staticClass:"nav-link fas fa-th-list fa-2x",attrs:{"data-toggle":"dropdown"}}),n("div",{staticClass:"dropdown-menu",staticStyle:{left:"-4em"},attrs:{"aria-labelledby":"navbarDropdown"}},[e._l(e.projectList,(function(t){return n("a",{key:t[e.projectTablePkName],staticClass:"dropdown-item project-item",attrs:{href:"#"},on:{click:function(n){return e.projectSelected(t[e.projectTablePkName])}}},[n("img",{staticClass:"project-link-image",attrs:{src:t.logo}}),e._v(e._s(t.name))])})),e.permissions["add-project"]?n("a",{staticClass:"dropdown-item project-item",attrs:{href:"#"},on:{click:e.addNewProject}},[n("i",{staticClass:"fas fa-plus-circle"}),e._v(e._s(e.gettext("Add new project")))]):e._e()],2)])])])])},zt=[],Kt="slug",Gt=(n("99af"),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info";a["default"].notify({title:e,text:t,type:n,data:{onNotificationClose:function(e,t){t()}}})}),Jt=function(e,t){var n=-1,r=new Date(1e3*e.delayed_to_timestamp);a["default"].notify({title:e.message.subject,text:"\n        ".concat(e.message.body,"\n        <br>\n        ").concat(e.message.footer,"\n        <br>\n        <br>\n        Maintenance starts at: ").concat(r,"\n    "),duration:n,type:"error",data:{onNotificationClose:function(e,n,a){a||d.post("/maintenance-notification/acknowledged/",{id:e.data.id,acknowledged_identifier:t}).then((function(){n(),document.dispatchEvent(Tt)}))},id:e.id,duration:n}})},Xt=function(e){var t={title:window.gettext("Error"),type:"error",data:{onNotificationClose:function(e,t){t()}}};e&&(t.text=e),a["default"].notify(t)},Qt=function(){function e(){Object(o["a"])(this,e)}return Object(s["a"])(e,[{key:"getProjects",value:function(e){return l.get("current-user")?d.get("/project").then((function(t){e(t.data)})).catch((function(t){e([]),console.error(t)})):null}},{key:"getPermissions",value:function(e){var t=l.get("user-permission");t&&e(t);var n={},a=new Promise((function(e){setTimeout((function(){n={"add-project":!0,"impersonate-user":!0},l.set("user-permission",n),e()}),100)}));a.then((function(){e(n)}))}}]),e}(),Yt=Qt,Zt={name:"projectlist",data:function(){return{projectList:[],permissions:{},dataStore:new Yt,isLoadingData:!1}},created:function(){var e=this;l.get("current-user")&&this.loadData(),document.addEventListener("login",(function(){e.loadData()}))},computed:{projectTablePkName:function(){return Kt}},methods:{projectSelected:function(e){var t=this;e!==l.get("current-project")&&(l.set("current-project",Ct.a.first(Ct.a.filter(this.projectList,(function(n){return n[t.projectTablePkName]===e})))[this.projectTablePkName]),document.dispatchEvent(It))},loadData:function(){var e=this;if(!this.isLoadingData){this.isLoadingData=!0;var t=this.dataStore.getProjects(this.setProjects);t?t.finally((function(){e.isLoadingData=!1})):this.isLoadingData=!1,this.dataStore.getPermissions(this.setPermissions)}},setProjects:function(e){this.projectList=e},setPermissions:function(e){this.permissions=e},addNewProject:function(){Gt("Make project","TODO")}}},en=Zt,tn=(n("7a4c"),Object(W["a"])(en,Wt,zt,!1,null,"1fcee032",null)),nn=tn.exports,an=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"titlebar-app titlebar-component"},[n("nav",{staticClass:"navbar navbar-expand-lg ",class:[e.darkMode?e.darkClass:e.lightClass]},[e.titleBarProps.logo?n("div",{staticClass:"nav-item"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("img",{staticClass:"float-left rounded-circle logo-image",attrs:{src:e.titleBarProps.logo,onclick:"window.location.href='/'"}})])])]):e._e(),e.titleBarProps.name?n("div",{staticClass:"navbar-brand left-spacing",staticStyle:{cursor:"default"},attrs:{href:"javascript:void(0);"}},[e._v(" "+e._s(e.titleBarProps.name)+" ")]):e._e(),e.breadcrumbsVisible&&e.loggedIn?n("div",{staticClass:"left-spacing"},[n("breadcrumbs")],1):e._e(),e.projectlistVisible&&e.loggedIn?n("div",{staticClass:"collapse navbar-collapse"},[n("ul",{staticClass:"navbar-nav mr-auto"}),n("projectlist")],1):e._e(),e.userprofileVisible&&e.loggedIn?n("div",[n("userprofile")],1):!e.loggedIn&&e.loginVisible?n("div",{staticClass:"login"}):e._e()]),e.loggedIn?n("notifications",{attrs:{width:"350",position:"top center"},scopedSlots:e._u([{key:"body",fn:function(t){var a=t.item,r=t.close;return[n("div",{staticClass:"vue-notification",class:a.type,on:{click:function(e){return a.data.onNotificationClose(a,r,!0)}}},[n("div",[n("div",{staticClass:"notification-title",staticStyle:{display:"inline-block","max-width":"95%"}},[n("div",{domProps:{innerHTML:e._s(a.title)}})]),n("div",{staticClass:"notification-content",staticStyle:{display:"inline-block","max-width":"95%"}},[n("div",{domProps:{innerHTML:e._s(a.text)}})]),-1===a.data.duration?n("div",{staticStyle:{display:"inline-block",float:"right","vertical-align":"middle"}},[n("button",{staticClass:"close",on:{click:function(e){return a.data.onNotificationClose(a,r)}}},[n("i",{staticClass:"fas fa-times fa-xs"})])]):e._e()])])]}}],null,!1,3497614173)}):e._e()],1)},rn=[],on=(n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"nav-item left-spacing userprofile-component"},[n("div",{staticClass:"card",attrs:{"data-toggle":"dropdown"}},[n("div",{staticClass:"card-body"},[e.componentData.avatar?n("img",{staticClass:"float-left rounded-circle",attrs:{src:e.componentData.avatar}}):e._e(),n("div",{staticClass:"user-names",style:e.componentData.avatar?"padding-left: 55px;":""},[e.componentData.first_name&&e.componentData.last_name?n("h5",{staticClass:"card-title"},[e._v(" "+e._s(e.componentData.first_name)+" "),n("br"),e._v(" "+e._s(e.componentData.last_name)+" "),e.isImpersonated?n("span",[e._v("("+e._s(e.gettext("Impersonated"))+")")]):e._e()]):e.componentData.email?n("h5",{staticClass:"card-title",staticStyle:{"margin-top":"0.6em"}},[e._v(" "+e._s(e.componentData.email)+" "),e.isImpersonated?n("span",[e._v("("+e._s(e.gettext("Impersonated"))+")")]):e._e()]):e.componentData.username?n("h5",{staticClass:"card-title",staticStyle:{"margin-top":"0.6em"}},[e._v(" "+e._s(e.componentData.username)+" "),e.isImpersonated?n("span",[e._v("("+e._s(e.gettext("Impersonated"))+")")]):e._e()]):e._e()]),n("ul",{staticClass:"navbar-nav"},[n("li",{staticClass:"nav-item dropdown"},[n("div",{staticClass:"dropdown-menu",staticStyle:{left:"-7em"},attrs:{"aria-labelledby":"navbarDropdown"}},[n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:e.userProfile}},[e._v(e._s(e.gettext("User profile")))]),n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:e.changePassword}},[e._v(e._s(e.gettext("Change password")))]),e.permissions["impersonate-user"]&&!e.isImpersonated?n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:e.showImpersonateLogin}},[e._v(e._s(e.gettext("Impersonate user")))]):e.isImpersonated?n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:e.stopImpersonation}},[e._v(e._s(e.gettext("Stop impersonation")))]):e._e(),n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:e.makeLogout}},[e._v(e._s(e.gettext("Logout")))])])])])])])])}),sn=[],ln=void 0,dn=function(e){var t,n=function(t){e.then&&e.then(t)},a=function(t){e.catch&&e.catch(t)},r=function(){e.finally&&e.finally()};t=["put","post","patch"].includes(e.method)?[e.url,e.data,e.config]:[e.url,e.config],D[e.method].apply(ln,t).then((function(e){n(e)})).catch((function(e){a(e)})).finally((function(){r()}))},cn={methods:{executeTableAction:function(e,t,n,a){var r=this;if(w.a.size(e))if("delete"===e.name){var i=a&&a.detailUrl?a.detailUrl:this.detail_url.replace("--record_id--",t.id);dn({method:"delete",url:i,then:a.then||function(){r&&r.processedConfiguration&&r.processedConfiguration.rows.deleteRow(t.id)}})}else if(["edit","add"].includes(e.name))this.showModal(e,t);else if("submit"===e.name){var o,s;t.id?(o=t.id,s="put"):(o="new",s="post"),s=a.submitMethod||s;var l=a&&a.detailUrl?a.detailUrl:this.detail_url.replace("--record_id--",o),d=a&&"headers"in a?a.headers:{"x-viewmode":"TABLE_ROW","x-pagination":1,"x-df-component-def":!0},c=this;dn({method:s,url:l,data:t,config:{headers:d},then:a.then||function(e){n&&n.hide(),c&&c.processedConfiguration&&c.processedConfiguration.rows.updateRowFromForm(e.data)},catch:a.catch||function(e){var t={},a="formEvents_".concat(n.currentDialog.body.uuid);400===e.response.status?w.a.forOwn(e.response.data,(function(e,n){t["".concat(n)]=w.a.join(e,"\n")})):t.non_field_errors=e.response.data.detail,F.$emit(a,{type:"submitErrors",data:t})}})}else"cancel"===e.name?n&&n.hide():"filter"===e.name&&this.loadData()}}},un=cn,fn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{position:"relative"}},[e._t("form-error",(function(){return[e.getErrorText?n("div",[n("small",{staticClass:"form-text text-danger",attrs:{id:"form-"+e.uuid+"-err"}},[e._v(e._s(e.getErrorText))]),n("hr")]):e._e()]})),n("input",{directives:[{name:"model",rawName:"v-model",value:e.record["user"],expression:"\n/* eslint-disable */\nrecord['user']"}],staticClass:"autocomplete form-control",attrs:{type:"text",id:"userAutocomplete","data-toggle":"dropdown",placeholder:e.searchUserPlaceholder},domProps:{value:e.record["user"]},on:{keyup:e.searchUsers,input:function(t){t.target.composing||e.$set(e.record,"user",t.target.value)}}}),n("ul",{staticClass:"dropdown-menu",staticStyle:{width:"100%"},attrs:{role:"menu"}},e._l(e.usersFilter,(function(t,a){return n("li",{key:"key_"+t.id+"_"+a,staticClass:"cursor-pointer",staticStyle:{width:"100%",padding:"0 .75rem"},on:{click:function(n){return e.selectUser(t)}}},[n("a",[e._v(e._s(t.full_name||t.email))])])})),0)],2)},pn=[],mn={name:"accounts-impersonate_dialog.html",props:["rows","uuid","record"],data:function(){return{usersFilter:[],errors:{}}},mounted:function(){var e=this;F.$on("formEvents_".concat(this.uuid),(function(t){"submitErrors"===t.type&&(e.errors=t.data)}))},beforeDestroy:function(){F.$off("formEvents_".concat(this.uuid))},computed:{searchUserPlaceholder:function(){return this.gettext("Enter any user attribute")},userSearchInputQueryString:function(){return this.record.user},getErrorText:function(){try{var e="";return Ct.a.forIn(this.errors,(function(t,n){e+="".concat(t,"\n")})),e=e.trim(),e}catch(t){}return""}},methods:{searchUsers:Ct.a.debounce((function(){var e=this;if(this.userSearchInputQueryString){var t="/account/profile?search=".concat(this.userSearchInputQueryString);d.get(t).then((function(t){e.usersFilter=t.data}))}}),250),selectUser:function(e){this.record.user_id=e.id,this.record.user=e.full_name||e.email}}},hn=mn,gn=Object(W["a"])(hn,fn,pn,!1,null,null,null),vn=gn.exports;a["default"].component(vn.name,vn);var bn="fake-uuid-chg-pass-654654-634565",_n="fake-uuid-usr-prof-654654-634565",yn="fake-uuid-imp-user-654654-634565",wn={name:"userprofile",data:function(){return{componentData:{},permissions:{},isImpersonated:!1}},created:function(){this.loadData()},mounted:function(){F.$on("tableActionExecuted_".concat(bn),this.dialogBtnClick),F.$on("tableActionExecuted_".concat(_n),this.dialogBtnClick),F.$on("tableActionExecuted_".concat(yn),this.dialogBtnClick)},beforeDestroy:function(){F.$off("tableActionExecuted_".concat(bn)),F.$off("tableActionExecuted_".concat(_n)),F.$off("tableActionExecuted_".concat(yn))},methods:{loadData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(new Yt).getPermissions((function(t){e.permissions=t})),this.isImpersonated=!!l.get("impersonated-user");var n=l.get("current-user");if(!n||t)return new Promise((function(t,n){d.get("/account/profile/current").then((function(n){e.componentData=n.data,l.set("current-user",e.componentData),t()})).catch((function(e){n(e)}))}));this.componentData=n},makeLogout:function(){St.logout()},showImpersonateLogin:function(){window.dynamicforms.dialog.fromURL("/account/impersonate/new.componentdef","new",yn)},reloadAfterImpersonationChange:function(){this.loadData(!0).finally((function(){window.location.href="/"}))},stopImpersonation:function(){var e=this;d.post("/account/impersonate/end").then((function(){l.delete("impersonated-user"),e.reloadAfterImpersonationChange()}))},userProfile:function(){window.dynamicforms.dialog.fromURL("/account/profile/".concat(this.componentData.id,".componentdef"),"edit",_n)},changePassword:function(){window.dynamicforms.dialog.fromURL("/account/change-password/new.componentdef","new",bn)},dialogBtnClick:function(e){var t,n,a=this;console.log(e),"cancel"!==e.action.name&&(e.modal.currentDialog.tableUuid===bn?(t={old_password:e.data.old_password,password:e.data.password,password_confirm:e.data.password_confirm},n={detailUrl:"/account/change-password/submit-change/",headers:void 0}):e.modal.currentDialog.tableUuid===_n?(t=e.data,n={detailUrl:"/account/profile/".concat(this.componentData.id,".json")}):e.modal.currentDialog.tableUuid===yn&&(t={id:e.data.user_id},n={detailUrl:"/account/impersonate/start",submitMethod:"post",headers:void 0,then:function(){a.impersonateModalVisible=!1,l.set("impersonated-user",!0),a.reloadAfterImpersonationChange()}})),un.methods.executeTableAction(e.action,t,e.modal,n)}}},xn=wn,Cn=(n("30aa"),Object(W["a"])(xn,on,sn,!1,null,"7b4854a8",null)),kn=Cn.exports,Dn={name:"titlebar",props:{darkMode:{default:!1,type:Boolean},projectlistVisible:{type:Boolean,default:!0},userprofileVisible:{type:Boolean,default:!0},breadcrumbsVisible:{type:Boolean,default:!0},loginVisible:{type:Boolean,default:!0}},data:function(){return{titleBarProps:{},loggedIn:null,lightClass:"navbar-light bg-light",darkClass:"navbar-dark bg-dark",maintenanceNoticesPeriodicApiCall:null,maintenanceNotificationItem:null}},beforeDestroy:function(){clearInterval(this.maintenanceNoticesPeriodicApiCall),this.maintenanceNoticesPeriodicApiCall=null},created:function(){St.checkLogin(!1,this.createdCallback)},methods:{createdCallback:function(){var e=this;document.title&&(this.titleBarProps.name=document.title),this.loggedIn=null!==l.get("current-user")&&void 0!==l.get("current-user"),this.loadData(),document.addEventListener("login",(function(t){t.detail&&t.detail["default-project"]?e.titleBarProps=t.detail["default-project"]:e.loadData(),e.loggedIn=!0})),document.addEventListener("logout",(function(){e.loggedIn=null,e.titleBarProps={}})),document.addEventListener("project-selected",(function(){e.loadData()})),document.addEventListener("maintenance-notification-acknowledged",(function(){e.maintenanceNotificationItem=null})),this.monitorMaintenanceNotifications()},loadData:function(){this.loadProjectData()},loadProjectData:function(){var e=this;l.get("current-project")&&d.get("/project/".concat(l.get("current-project"))).then((function(t){e.titleBarProps=t.data}))},monitorMaintenanceNotifications:function(){var e=this;this.maintenanceNoticesPeriodicApiCall=setInterval((function(){l.get("current-user")&&d.get("/maintenance-notification/",{hideErrorNotice:!0}).then((function(t){var n=Ct.a.first(t.data);if(n){var a=n.notification_acknowledged_data,r=n.delayed_to_timestamp,i=[r-36e3,r-7200-1],o=[r-7200,r-600-1],s=[r-600,r],l=Math.floor(Date.now()/1e3),d=8,c=Ct.a.inRange(l,i[0],i[1])&&!Ct.a.size(Ct.a.filter(a,(function(e){return 8===e}))),u=Ct.a.inRange(l,o[0],o[1])&&!Ct.a.size(Ct.a.filter(a,(function(e){return 1===e}))),f=Ct.a.inRange(l,s[0],s[1])&&!Ct.a.size(Ct.a.filter(a,(function(e){return 5===e})));u&&(d=1),f&&(d=5),!e.maintenanceNotificationItem&&(c||u||f)&&(e.maintenanceNotificationItem=n,Jt(e.maintenanceNotificationItem,d))}})).catch()}),45e3)}},components:{breadcrumbs:Ot,projectlist:nn,userprofile:kn}},jn=Dn,On=(n("5bc6"),Object(W["a"])(jn,an,rn,!1,null,"99ea155a",null)),Fn=On.exports,Pn={titlebar:Fn,breadcrumbs:Ot,login:Mt,modalwindow:Ut,projectlist:nn,userprofile:kn},Ln=function(e,t,n){return"undefined"===typeof window.dynamicforms&&(window.dynamicforms={}),!window.dynamicforms.dialog&&n&&new a["default"]({el:"#".concat(n),components:{ModalHandler:vt},template:"<ModalHandler></ModalHandler>"}),a["default"].use(_t.a),new a["default"]({el:"#".concat(e),template:t,components:Pn})},En=Ln;n("150b");"undefined"===typeof window.gettext&&(window.gettext=function(e){return e}),a["default"].config.productionTip=!1,a["default"].prototype.gettext=window.gettext,window.Vue=a["default"],window.createApp=En,window.showNotification=Gt,window.showGeneralErrorNotification=Xt,window.apiClient=d,window.Store=l,window.ProjectBaseData=Yt},"5bc6":function(e,t,n){"use strict";n("2505")},"7a4c":function(e,t,n){"use strict";n("306c")},"86fa":function(e,t,n){"use strict";n("0e0f")},"8aaf":function(e,t,n){},9123:function(e,t,n){},9982:function(e,t,n){"use strict";n("df4f")},"9f3e":function(e,t,n){},a18d:function(e,t,n){},a508:function(e,t,n){},ba13:function(e,t,n){"use strict";n("d656")},bc54:function(e,t,n){},c72c:function(e,t,n){"use strict";n("9f3e")},d656:function(e,t,n){},df4f:function(e,t,n){},fc6c:function(e,t,n){"use strict";n("9123")}});
//# sourceMappingURL=django-project-base.js.map